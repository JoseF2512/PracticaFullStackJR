<div class="container">

  <h2 class="title">Gestión de Productos</h2>

  <!-- BOTÓN PARA MOSTRAR/OCULTAR FORMULARIO -->
  <button class="toggle-btn" (click)="toggleForm()">
    {{ showForm ? 'Ocultar Formulario' : 'Nuevo Producto' }}
  </button>

  <!-- FORMULARIO -->
  <form
    *ngIf="showForm"
    [formGroup]="productForm"
    (ngSubmit)="submit()"
    class="product-form"
  >
    <div class="form-row">
      <input placeholder="Nombre" formControlName="nombre" required />
      <input placeholder="Marca" formControlName="marca" />
      <input placeholder="Categoría" formControlName="categoria" />
    </div>

    <div class="form-row">
      <label for="inpPrecio">Precio:</label>
      <input type="number" placeholder="Precio" formControlName="precio" />
      <label for="inpExistencias">Existencias:</label>
      <input type="number" placeholder="Existencias" formControlName="existencias" />
    </div>

    <label class="checkbox">
      <input type="checkbox" formControlName="activo" /> Activo
    </label>

    <div class="form-buttons">
      <button type="submit" class="primary-btn">
        {{ editMode ? 'Actualizar' : 'Crear' }}
      </button>

      <button type="button" class="cancel-btn" (click)="cancelForm()">
        Cancelar
      </button>
    </div>
  </form>

  <hr />

  <!-- FILTRO -->
  <input
    type="text"
    placeholder="Buscar por nombre..."
    class="filtro"
    [(ngModel)]="filtroNombre"
    (input)="filtrarProductos()"
  />

  <!-- TABLA DE PRODUCTOS -->
  <table class="product-table">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Marca</th>
        <th>Categoría</th>
        <th>Precio</th>
        <th>Existencias</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let p of productosFiltrados">
        <td>{{ p.nombre }}</td>
        <td>{{ p.marca }}</td>
        <td>{{ p.categoria }}</td>
        <td>${{ p.precio }}</td>
        <td>{{ p.existencias }}</td>

        <td>
          <span
            [ngClass]="{
              'activo': p.activo,
              'inactivo': !p.activo
            }"
          >
            {{ p.activo ? 'Activo' : 'Inactivo' }}
          </span>
        </td>

        <td class="actions">
  <button class="edit-btn action-btn" (click)="editarProducto(p)">Editar</button>
  <button class="state-btn action-btn" (click)="toggleActivo(p)">
    {{ p.activo ? 'Desactivar' : 'Activar' }}
  </button>
</td>
      </tr>
    </tbody>
  </table>

</div>
